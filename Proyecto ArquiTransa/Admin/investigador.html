<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investigador</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.0.7/css/boxicons.min.css">  
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header>
	<button type="button" class="cerrar-sesion" onclick="cerrarSesion()"><i class='bx bx-log-out'></i></button>
        <div class="buscar">
            <a href="Admin.html" id="titulo">Investigador</a>  
            <input type="text" class="busqueda">
            <button type="submit" class="search"><i class='bx bx-search'></i></button>
        </div>

    </header>

    <main>
        <ul id="plantasContainer">
            <!-- Aquí se agregarán dinámicamente los elementos de la lista -->
        </ul>
        
        <div id="contenedorSeleccionados">
            <!-- Aquí se agregarán las plantas seleccionadas -->
        </div>
        
        <script>
		function cerrarSesion() {
            // Aquí puedes agregar el código para cerrar la sesión, como>
            window.location.href = "../LoginAdm/login.html"; // Cambia ">

            // Reemplazar la entrada actual en el historial con la págin>
            window.history.replaceState({}, document.title, "../LoginAdm/login.html");
        }
            window.onload = function() {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("plantasContainer").innerHTML = this.responseText;

                        // Obtener todos los elementos de la lista de plantas
                        var plantas = document.querySelectorAll('.planta');

                        // Agregar evento de clic a cada elemento de la lista
                        plantas.forEach(function(planta) {
                            planta.addEventListener('click', function() {
                                // Deseleccionar todas las plantas
                                plantas.forEach(function(p) {
                                    p.classList.remove('seleccionada');
                                });

                                // Seleccionar la planta clicada
                                planta.classList.add('seleccionada');

                                // Clonar el elemento seleccionado y agregarlo al contenedor de seleccionados
                                var plantaClonada = planta.cloneNode(true);
                                document.getElementById("contenedorSeleccionados").innerHTML = '';
                                document.getElementById("contenedorSeleccionados").appendChild(plantaClonada);

                                // Eliminar el evento de clic del elemento clonado para evitar duplicados
                                plantaClonada.removeEventListener('click', null);
                            });
                        });
                    }
                };
                xhttp.open("GET", "obtener_plantas.php", true);
                xhttp.send();
            };
        </script>
    </main>
    

    <footer>
        <button type="submit" class="Addplanta"><i class='bx bxs-file-plus'></i></button>
        <button type="submit" class="editar"><i class='bx bxs-pencil'></i></button>
        <button type="submit" class="eliminar"><i class='bx bx-trash'></i></button>
    </footer>
</body>
</html>
